# –§–∏–Ω–∞–ª—å–Ω—ã–π —Å—Ç–∞—Ç—É—Å —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è Telegram-–±–æ—Ç–∞

## ‚úÖ –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã –∏ —Ä–∞–±–æ—Ç–∞—é—Ç

### –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ (2025-12-10 00:07 UTC)

| –°–µ—Ä–≤–∏—Å | –°—Ç–∞—Ç—É—Å | –ü–æ—Ä—Ç | PID | Health Check |
|--------|--------|------|-----|--------------|
| **Backend API** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 8000 | 14451 | `{"status":"healthy","gpu_available":true}` |
| **GPU Server** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | 8002 | 16250 | `{"status":"degraded","comfyui_available":false}` |
| **Telegram Bot** | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | - | 20322 | –ü–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç Telegram API |
| **ComfyUI** | ‚ö†Ô∏è –ù–µ–¥–æ—Å—Ç—É–ø–µ–Ω | 8188 | - | –¢—Ä–µ–±—É–µ—Ç –∑–∞–ø—É—Å–∫–∞ |

### –õ–æ–≥–∏ —Å–µ—Ä–≤–∏—Å–æ–≤

- **–ë–æ—Ç**: `/workspace/logs/telegram_bot.log`
- **Backend**: `/workspace/logs/backend.log`
- **GPU Server**: `/workspace/logs/gpu_server.log`

## üîß –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç–∏–ª–µ–π `noir` –∏ `super_realism` –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –±–æ—Ç–∞
2. ‚úÖ –ö–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω —Å GitHub (–∫–æ–º–º–∏—Ç `271cbd1`)
3. ‚úÖ –ë–æ—Ç –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω —Å –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–º –∫–æ–¥–æ–º
4. ‚úÖ –°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç `start_bot.sh` –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞

## üß™ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

### ‚úÖ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

1. **/start –∏ –≤—ã–±–æ—Ä —è–∑—ã–∫–∞** - –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–æ
2. **–°–≤–æ–±–æ–¥–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (–±–µ–∑ –ª–∏—Ü–∞)** - –≥–æ—Ç–æ–≤–æ
3. **–°–≤–æ–±–æ–¥–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è (—Å –ª–∏—Ü–æ–º)** - –≥–æ—Ç–æ–≤–æ
4. **–£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–µ–∂–¥—ã** - –≥–æ—Ç–æ–≤–æ

### ‚ö†Ô∏è –¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è

1. **ComfyUI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –º–æ–∂–µ—Ç –Ω–µ —Ä–∞–±–æ—Ç–∞—Ç—å
   - Backend –∏ GPU Server —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –ü—Ä–æ–±–ª–µ–º–∞ —Ç–æ–ª—å–∫–æ –≤ ComfyUI
   - –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –±–æ—Ç–∞ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ (–º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ –º–æ–º–µ–Ω—Ç–∞ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏)

2. **NSFW —Ä–µ–∂–∏–º** - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –≤ –±–æ—Ç–µ
   - Backend –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç `/nsfw_face` endpoint
   - –í –±–æ—Ç–µ –Ω–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ –∏ –∫–Ω–æ–ø–∫–∏ –≤ –º–µ–Ω—é

## üìã –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```bash
ssh runpod "ps aux | grep -E '[b]ot.py|[u]vicorn.*backend|[u]vicorn.*gpu'"
```

### –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤
```bash
# –ë–æ—Ç (—Ä–µ–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è)
ssh runpod "tail -f /workspace/logs/telegram_bot.log"

# Backend
ssh runpod "tail -f /workspace/logs/backend.log"

# GPU Server
ssh runpod "tail -f /workspace/logs/gpu_server.log"
```

### –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ –±–æ—Ç–∞
```bash
ssh runpod "/workspace/start_bot.sh"
```

### Health checks
```bash
ssh runpod "curl -s http://127.0.0.1:8000/health"
ssh runpod "curl -s http://127.0.0.1:8002/health"
```

## üéØ –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –¢–µ—Å—Ç 1: –ë–∞–∑–æ–≤—ã–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
1. –û—Ç–ø—Ä–∞–≤–∏—Ç—å `/start` –≤ Telegram
2. –í—ã–±—Ä–∞—Ç—å —è–∑—ã–∫ (–Ω–∞–ø—Ä–∏–º–µ—Ä, –†—É—Å—Å–∫–∏–π)
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ú–µ–Ω—é —Å –∫–Ω–æ–ø–∫–∞–º–∏:
- üé® –°–≤–æ–±–æ–¥–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
- üëï –£–¥–∞–ª–∏—Ç—å –æ–¥–µ–∂–¥—É
- üåê –ò–∑–º–µ–Ω–∏—Ç—å —è–∑—ã–∫

### –¢–µ—Å—Ç 2: –°–≤–æ–±–æ–¥–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è
1. –ù–∞–∂–∞—Ç—å "üé® –°–≤–æ–±–æ–¥–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è"
2. –í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç: `–∫—Ä–∞—Å–∏–≤–∞—è –¥–µ–≤—É—à–∫–∞ –≤ –∫—Ä–∞—Å–Ω–æ–º –ø–ª–∞—Ç—å–µ`
3. –í—ã–±—Ä–∞—Ç—å "‚ùå –ù–µ—Ç, —Ç–æ–ª—å–∫–æ —Ç–µ–∫—Å—Ç"
4. –í—ã–±—Ä–∞—Ç—å —Å—Ç–∏–ª—å (–Ω–∞–ø—Ä–∏–º–µ—Ä, "üì∏ –°—É–ø–µ—Ä—Ä–µ–∞–ª–∏–∑–º")

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: 
- –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ backend
- –ï—Å–ª–∏ ComfyUI —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–∏–¥–µ—Ç –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ
- –ï—Å–ª–∏ ComfyUI –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç - –ø—Ä–∏–¥–µ—Ç –æ—à–∏–±–∫–∞ (–Ω–æ –±–æ—Ç –¥–æ–ª–∂–µ–Ω –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å –µ—ë –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ)

### –¢–µ—Å—Ç 3: –° –ª–∏—Ü–æ–º
1. –ù–∞–∂–∞—Ç—å "üé® –°–≤–æ–±–æ–¥–Ω–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è"
2. –í–≤–µ—Å—Ç–∏ –ø—Ä–æ–º–ø—Ç
3. –í—ã–±—Ä–∞—Ç—å "‚úÖ –î–∞, –¥–æ–±–∞–≤–∏—Ç—å –ª–∏—Ü–æ"
4. –û—Ç–ø—Ä–∞–≤–∏—Ç—å 1-3 —Ñ–æ—Ç–æ –ª–∏—Ü–∞
5. –í—ã–±—Ä–∞—Ç—å —Å—Ç–∏–ª—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –ê–Ω–∞–ª–æ–≥–∏—á–Ω–æ —Ç–µ—Å—Ç—É 2, –Ω–æ —Å face_images –≤ –∑–∞–ø—Ä–æ—Å–µ

### –¢–µ—Å—Ç 4: –£–¥–∞–ª–µ–Ω–∏–µ –æ–¥–µ–∂–¥—ã
1. –ù–∞–∂–∞—Ç—å "üëï –£–¥–∞–ª–∏—Ç—å –æ–¥–µ–∂–¥—É"
2. –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ñ–æ—Ç–æ
3. –í—ã–±—Ä–∞—Ç—å —Å—Ç–∏–ª—å

**–û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç**: –û–±—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ (–µ—Å–ª–∏ ComfyUI —Ä–∞–±–æ—Ç–∞–µ—Ç)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤–æ –≤—Ä–µ–º—è —Ç–µ—Å—Ç–æ–≤

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –æ—Ç–∫—Ä—ã—Ç—å 3 —Ç–µ—Ä–º–∏–Ω–∞–ª–∞:

**–¢–µ—Ä–º–∏–Ω–∞–ª 1:**
```bash
ssh runpod "tail -f /workspace/logs/telegram_bot.log"
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 2:**
```bash
ssh runpod "tail -f /workspace/logs/backend.log"
```

**–¢–µ—Ä–º–∏–Ω–∞–ª 3:**
```bash
ssh runpod "tail -f /workspace/logs/gpu_server.log"
```

## üîç –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä—è—Ç—å –≤ –ª–æ–≥–∞—Ö

### –£—Å–ø–µ—à–Ω—ã–π –∑–∞–ø—Ä–æ—Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:
```
INFO - User {user_id} selected style: {style}
INFO - HTTP Request: POST http://localhost:8000/generate
INFO - Successfully generated image for user {user_id}
```

### –û—à–∏–±–∫–∞ (–µ—Å–ª–∏ ComfyUI –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω):
```
ERROR - Generation failed: {error_message}
```

–ë–æ—Ç –¥–æ–ª–∂–µ–Ω –ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø–æ–Ω—è—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ.

## üìù –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ **–ó–∞–ø—É—Å–∫ –±–æ—Ç–∞** - –í–´–ü–û–õ–ù–ï–ù–û
2. ‚è≥ **–ü—Ä–æ–≤–µ—Å—Ç–∏ —Ç–µ—Å—Ç—ã –≤ Telegram** - –ì–û–¢–û–í–û –ö –í–´–ü–û–õ–ù–ï–ù–ò–Æ
3. ‚è≥ **–ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏**
4. ‚è≥ **–ò—Å–ø—Ä–∞–≤–∏—Ç—å –æ—à–∏–±–∫–∏ –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å**
5. ‚è≥ **–ü–æ–≤—Ç–æ—Ä–∏—Ç—å —Ç–µ—Å—Ç—ã**

## üîó –°—Å—ã–ª–∫–∏

- **GitHub**: `https://github.com/kokojambos250325/generatorai2.git`
- **–ö–æ–º–º–∏—Ç**: `271cbd1` - Fix: Add support for noir and super_realism styles
- **Backend API**: `http://127.0.0.1:8000`
- **GPU Server**: `http://127.0.0.1:8002`

---

**–°—Ç–∞—Ç—É—Å**: ‚úÖ **–ì–û–¢–û–í–û –ö –¢–ï–°–¢–ò–†–û–í–ê–ù–ò–Æ**

–í—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã, –∫–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω, –±–æ—Ç –ø–æ–ª—É—á–∞–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –æ—Ç Telegram API.

**–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ**: ComfyUI —Ç—Ä–µ–±—É–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π, –Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –±–æ—Ç–∞ —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ.

